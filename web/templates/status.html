{% extends "base.html" %}

{% block title %}Pipeline Status - {{ pmid }} - Hidden Hill{% endblock %}

{% block header_title %}Pipeline Status{% endblock %}

{% block content %}
  <p>Tracking the generation process for paper <strong>{{ pmid }}</strong>.</p>

  {% if final_video_exists %}
    <div class="alert alert-info">
      <p><strong>Final video ready!</strong></p>
      <div class="button-group">
        <a href="{{ final_video_url }}" class="btn-primary">Download/Play</a>
        <a href="/result/{{ pmid }}" class="btn-secondary">Open result page</a>
      </div>
    </div>
  {% else %}
    <div class="alert alert-info">
      <p>Pipeline is running or queued. Refresh this page to update status.</p>
    </div>
  {% endif %}

  <h2>Pipeline log (tail)</h2>
  <pre>{{ log_tail }}</pre>

  <div class="button-group">
    <a href="/upload/" class="btn-primary">Generate another video</a>
  </div>
{% endblock %}
